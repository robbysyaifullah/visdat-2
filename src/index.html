<!DOCTYPE html>
<html>
    <head>

	<title>Choropleth Tutorial - Leaflet</title>

	<meta charset="utf-8" />
        <meta name="theme-color" content="#00000" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="manifest" href="/manifest.json">

	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

        <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
        <script src="node_modules/leaflet/dist/leaflet.js"></script>


	<style>
         body {
             padding: 0;
             margin: 0;
         }
         html, body, #map {
             height: 100%;
             width: 100vw;
         }
         .info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .info h4 { margin: 0 0 5px; color: #777; }
         .legend { text-align: left; line-height: 18px; color: #555; } .legend i { width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.7; }</style>
    </head>
    <body>
		<div id='judul'>
			<h1>Calon kandidat</h1>
			<img src="../data/1_Rindu.jpg"></img><br/>
			<img src="../data/2_Hasanah.jpg"></img><br/>
			<img src="../data/3_Asyik.jpg"></img><br/>
			<img src="../data/4_2DM.jpg"></img><br/>
		</div>
        <div id='map' style="margin-top:200px; margin-bottom:200px">
            <noscript>
            <div>
                <h1>Error: JavaScript not enabled</h1>
                <p>This page requires JavaScript. Here are the <a href="http://www.enable-javascript.com/" target="_blank">instructions how to enable JavaScript in your web browser</a>.</p>
            </div>
        </noscript>
        </div>

        <script type="text/javascript">
         if(navigator.serviceWorker) {
             navigator.serviceWorker.register('sw.js')
                      .catch(function(err) {
                          console.error('Unable to register service worker.', err);
                      });
         }
        </script>

        <script type="text/javascript" src="us-states.js"></script>

        <script type="text/javascript">

	 var map = L.map('map').setView([-6.75, 107.75], 9)
	 map.setMaxBounds([
                    [-5, 106],
                    [-8, 110]
				]);
	map.options.minZoom = 8
	map.options.maxZoom
	 L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
	     maxZoom: 18,
	     attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			  '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			  'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	     id: 'mapbox.light'
	 }).addTo(map);


	 // control that shows state info on hover
	 var info = L.control();

	 info.onAdd = function (map) {
	     this._div = L.DomUtil.create('div', 'info');
	     this.update();
	     return this._div;
	 };

	 info.update = function (props) {
	     this._div.innerHTML = '<h4>Hasil Pilgub Per Tingkat II</h4>' +  (props ?
															'<b>' + props.name + '</b><br />' + 
															'Pemenang : ' + props.winner + '<br/>' + 
															'<img height="350px", width:"350px", src="../data/'+props.name+'.svg"+'+'></img>'
			                                              : 'Hover over a state');
	 };

	 info.addTo(map);


	 // get color depending on population density value
	 function getColor(d) {
		return d == "2DM" ? '#4563d1' :
		    d == "Asyik"  ? '#e5922d' :
		    d == "Hasanah"  ? '#e54759' :
		    d == "Rindu"  ? '#1fc482' :
			'#FFEDA0';
	    //  return d > 400 ? '#4563d1' :
		//     d > 300  ? '#e5922d' :
		//     d > 200  ? '#e54759' :
		//     d > 100  ? '#1fc482' :
		// 	'#FFEDA0';
	 }

	 function style(feature) {
	     return {
		 weight: 2,
		 opacity: 1,
		 color: 'white',
		 dashArray: '3',
		 fillOpacity: 0.9,
		 fillColor: getColor(feature.properties.winner)
	     };
	 }

	 function highlightFeature(e) {
	     var layer = e.target;

	     layer.setStyle({
		 weight: 5,
		 color: '#666',
		 dashArray: '',
		 fillOpacity: 0.7
	     });

	     if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
		 layer.bringToFront();
	     }

	     info.update(layer.feature.properties);
	 }

	 var geojson;

	 function resetHighlight(e) {
	     geojson.resetStyle(e.target);
	     info.update();
	 }

	 function zoomToFeature(e) {
	     map.fitBounds(e.target.getBounds());
	 }

	 function onEachFeature(feature, layer) {
	     layer.on({
		 mouseover: highlightFeature,
		 mouseout: resetHighlight,
		 click: zoomToFeature
	     });
	 }

	 geojson = L.geoJson(statesData, {
	     style: style,
	     onEachFeature: onEachFeature
	 }).addTo(map);

	 map.attributionControl.addAttribution('Population data &copy; <a href="http://census.gov/">US Census Bureau</a>');


	 var legend = L.control({position: 'bottomright'});

	 legend.onAdd = function (map) {

	     var div = L.DomUtil.create('div', 'info legend'),
		//  grades = [0, 100, 200, 300, 400],
		 grades = ["Rindu", "Hasanah", "Asyik", "2DM"],
		 labels = [],
		 from, to;

	     for (var i = 0; i < grades.length; i++) {
		 from = grades[i];
		 to = grades[i + 1];

		 labels.push(
		     '<i style="background:' + getColor(from) + '"></i> ' +from 
			);
	     }

	     div.innerHTML = labels.join('<br>');
	     return div;
	 };

	 legend.addTo(map);

        </script>



    </body>
</html>
